# 动态交互知识图谱

一个基于React和D3.js的交互式知识图谱可视化网站，用于探索节点之间的关系与连接。

## 功能特性

### 核心功能
- **动态图谱可视化**：使用D3.js力导向图算法实现自适应节点布局
- **节点交互**：点击节点查看详细信息和相关连接
- **拖拽编辑**：自由拖动节点调整位置
- **缩放平移**：使用鼠标滚轮缩放，拖拽平移整个图谱
- **搜索功能**：快速搜索和定位特定节点
- **分类筛选**：按节点类型筛选（地点、时间、活动、情感、元素）

### 交互特性
- **悬停高亮**：悬停节点时高亮相关连接和关联节点
- **实时反馈**：平滑的过渡动画和视觉反馈
- **信息面板**：右侧滑出式面板展示节点详细信息
- **统计信息**：实时显示节点和连接数量

## 设计理念

### 温暖叙事性设计
该网站采用"温暖叙事性设计"方案，特点包括：

- **色彩体系**：
  - 主色：温暖米色 (#f5e6d3) + 深棕色 (#4a3728)
  - 强调色：温暖橙色 (#e8a87c)
  - 辅助色：柔和紫色 (#d4b5e8)
  - 背景：奶油色 (#faf8f3)

- **排版**：
  - 标题：Merriweather 700（优雅的衬线字体）
  - 正文：Lora 400（易读的衬线字体）
  - 营造温暖、文学的气质

- **布局**：
  - 中心放射状布局，主节点突出
  - 周围节点按关联程度分布
  - 左侧控制面板，右侧信息面板
  - 顶部统计信息栏

- **动画**：
  - 弹性缩放入场效果
  - 流畅的悬停过渡
  - 光晕和阴影效果
  - 平滑的拖拽动画

## 节点数据结构

### 节点类型
1. **地点** (📍)：小学、小花园、巷子、这个地方
2. **时间** (⏰)：小时候、放学
3. **活动** (🎯)：打羽毛球、闲逛
4. **情感** (💭)：不开心、治愈
5. **元素** (✨)：天光

### 节点关系
- 空间关系：地点之间的包含关系
- 时间关系：活动发生的时间
- 情感关系：事件与情感的联系
- 因果关系：事件之间的触发关系

## 使用指南

### 基本操作
| 操作 | 说明 |
|------|------|
| 点击节点 | 查看节点详情和相关信息 |
| 拖拽节点 | 移动节点位置 |
| 鼠标滚轮 | 缩放图谱 |
| 拖拽背景 | 平移整个图谱 |
| 悬停节点 | 高亮相关连接 |

### 搜索和筛选
- 在左侧面板搜索框输入节点名称
- 使用分类筛选按钮快速定位特定类型的节点
- 节点列表实时更新显示匹配结果

### 信息面板
- 点击任意节点打开右侧信息面板
- 查看节点描述和相关节点列表
- 点击关闭按钮或空白区域关闭面板

## 技术栈

- **前端框架**：React 19 + TypeScript
- **可视化**：D3.js 7
- **样式**：Tailwind CSS 4 + 自定义CSS
- **UI组件**：shadcn/ui
- **字体**：Google Fonts (Merriweather, Lora)

## 项目结构

```
client/
├── src/
│   ├── components/
│   │   ├── KnowledgeGraph.tsx      # D3图谱可视化组件
│   │   ├── ControlPanel.tsx         # 左侧控制面板
│   │   ├── NodeInfoPanel.tsx        # 右侧信息面板
│   │   └── HelpCard.tsx             # 帮助提示卡片
│   ├── pages/
│   │   └── Home.tsx                 # 主页面
│   ├── data/
│   │   └── graphData.ts             # 图谱数据定义
│   ├── App.tsx                      # 应用主组件
│   ├── index.css                    # 全局样式
│   └── main.tsx                     # 入口文件
├── public/                          # 静态资源
└── index.html                       # HTML模板
```

## 数据格式

### 节点数据
```typescript
interface GraphNode {
  id: string;              // 唯一标识
  label: string;           // 显示名称
  description?: string;    // 节点描述
  category?: string;       // 节点类型
  color?: string;          // 节点颜色
}
```

### 连接数据
```typescript
interface GraphLink {
  source: string;          // 源节点ID
  target: string;          // 目标节点ID
  label?: string;          // 关系标签
  strength?: number;       // 连接强度 (0-1)
}
```

## 自定义指南

### 添加新节点
在 `client/src/data/graphData.ts` 中修改 `graphData` 对象：

```typescript
{
  id: "新节点",
  label: "新节点",
  description: "节点描述",
  category: "place",  // 或其他类型
  color: "#e8a87c"    // 自定义颜色
}
```

### 添加新连接
在 `graphData.links` 中添加：

```typescript
{
  source: "节点A",
  target: "节点B",
  label: "关系类型",
  strength: 0.8
}
```

### 自定义颜色
修改 `client/src/index.css` 中的CSS变量以改变整体色调。

## 浏览器兼容性

- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

## 性能优化

- 使用D3.js力导向图算法自动优化节点布局
- 实现了碰撞检测防止节点重叠
- 支持平滑的缩放和拖拽交互
- 优化了渲染性能以支持100+节点

## 许可证

MIT

## 更新日志

### v1.0.0 (2025-01-01)
- 初始版本发布
- 实现了基础的图谱可视化功能
- 添加了搜索和筛选功能
- 实现了完整的交互系统
